@if (loading) {
  <div class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Chargement du devoir...</p>
  </div>
} 
@else if (assignmentTransmis) {
  <mat-card class="detail-card">
    <mat-card-header>
      <div mat-card-avatar class="header-icon">
        <mat-icon>assignment</mat-icon>
      </div>
      <mat-card-title>{{ assignmentTransmis.nom }}</mat-card-title>
      <mat-card-subtitle>
        À rendre pour le : {{ assignmentTransmis.dateDeRendu | date:'dd/MM/yyyy' }}
      </mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <div class="status-box" [class.done]="assignmentTransmis.rendu" [class.pending]="!assignmentTransmis.rendu">
        <mat-icon>{{ assignmentTransmis.rendu ? 'check_circle' : 'pending' }}</mat-icon>
        <span>{{ assignmentTransmis.rendu ? 'Devoir rendu' : 'Non rendu' }}</span>
      </div>
    </mat-card-content>
    
    <mat-card-actions align="end">
      <mat-checkbox 
        [checked]="assignmentTransmis.rendu"
        (change)="onCheckboxChange()"
        [disabled]="!isLoggedIn">
        Marquer comme rendu
      </mat-checkbox>
      
      <span class="spacer"></span>

      <button mat-stroked-button color="primary"
        [routerLink]="['/assignment', assignmentTransmis.id, 'edit']"
        [disabled]="!isAdmin">
        <mat-icon>edit</mat-icon> MODIFIER
      </button>

      <button mat-flat-button color="warn" 
        (click)="onAssignmentSupprime()"
        [disabled]="!isAdmin">
        <mat-icon>delete</mat-icon> SUPPRIMER
      </button>
    </mat-card-actions>
  </mat-card>
} 
@else {
  <div class="error-container">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h2>Devoir introuvable</h2>
    <p>Ce devoir n'existe pas ou a été supprimé.</p>
    <button mat-raised-button color="primary" routerLink="/assignments">Retour à la liste</button>
  </div>
}